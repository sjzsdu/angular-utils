@if (formGroup) {
  <form
    nz-form
    [nzLayout]="layout()"
    [nzNoColon]="nzNoColon()"
    [nzLabelAlign]="nzLabelAlign()"
    [nzLabelWrap]="nzLabelWrap()"
    [formGroup]="formGroup"
    (ngSubmit)="submitForm()"
  >
    @for (item of this.items(); track item.name) {
      @if (!item.isHide) {
        <nz-form-item>
          @if (!item?.label?.hideLabel) {
            <nz-form-label [nzSpan]="labelSpan() ?? null" [nzRequired]="item.required">
              {{ item?.label?.label || (item.name | label: item?.label?.labelFunc || 'WordUppercase') }}
              @if (item?.label?.tooltip) {
                <span
                  nz-icon
                  nzType="info-circle"
                  class="label-icon"
                  nzTheme="outline"
                  nz-tooltip
                  [nzTooltipPlacement]="item?.label?.tooltipPlacement ?? 'right'"
                  [nzTooltipTitle]="item?.label?.tooltip"
                ></span>
              }
            </nz-form-label>
          }
          <nz-form-control
            [nzSpan]="controlSpan() ?? null"
            [nzHasFeedback]="item?.control?.hasFeedback ?? false"
            [nzSuccessTip]="item?.control?.successTip"
            [nzErrorTip]="item?.control?.errorTip"
            [nzWarningTip]="item?.control?.warningTip"
            [nzValidatingTip]="item?.control?.validatingTip"
            [nzAutoTips]="item?.control?.autoTips ?? {}"
            [nzDisableAutoTips]="item?.control?.disableAutoTips"
            [nzExtra]="item?.control?.extra"
          >
            @switch (item.type) {
              @case ('input') {
                <nz-input-group
                  [nzAddOnBefore]="item?.params?.nzAddOnBefore"
                  [nzAddOnAfter]="item?.params?.nzAddOnAfter"
                >
                  <input
                    type="text"
                    [formControlName]="item.name"
                    nz-input
                    [placeholder]="item.placeholder ?? 'Please Input ' + (item?.label?.label || (item.name | label))"
                  />
                </nz-input-group>
              }
              @case ('number') {
                <nz-input-group
                  [nzAddOnBefore]="item?.params?.nzAddOnBefore"
                  [nzAddOnAfter]="item?.params?.nzAddOnAfter"
                >
                  <nz-input-number
                    style="width: 100%"
                    [formControlName]="item.name"
                    [nzMin]="item?.params?.nzMin"
                    [nzMax]="item?.params?.nzMax"
                    [nzPrecision]="item?.params?.nzPrecision ?? 1"
                    [nzStep]="item?.params?.nzStep"
                  />
                </nz-input-group>
              }
              @case ('radio') {
                <nz-radio-group
                  [formControlName]="item.name"
                  [nzSize]="item?.params?.nzSize ?? 'default'"
                  [nzButtonStyle]="item?.params?.nzButtonStyle ?? 'outline'"
                  [nzDisabled]="item.disabled ?? false"
                >
                  @for (opt of item.params?.options; track opt) {
                    <label
                      nz-radio
                      [nzValue]="isOptItem(opt) ? opt.value : opt"
                      [nzDisabled]="isOptItem(opt) ? opt.disabled : false"
                    >
                      {{ isOptItem(opt) ? opt.label : (opt | label: item?.label?.labelFunc || 'WordUppercase') }}</label
                    >
                  }
                </nz-radio-group>
              }
              @case ('checkbox') {
                <label nz-checkbox [formControlName]="item.name" [nzDisabled]="item.disabled ?? false">{{
                  item.label?.label ?? (item.name | label: item?.label?.labelFunc || 'WordUppercase')
                }}</label>
              }
              @case ('checkboxGroup') {
                <nz-checkbox-group [formControlName]="item.name">
                  @for (opt of item.params?.options; track opt) {
                    <label
                      nz-checkbox
                      [nzValue]="isOptItem(opt) ? opt.value : opt"
                      [nzDisabled]="isOptItem(opt) ? opt.disabled : false"
                    >
                      {{ isOptItem(opt) ? opt.label : (opt | label: item?.label?.labelFunc || 'WordUppercase') }}</label
                    >
                  }
                </nz-checkbox-group>
              }
              @case ('select') {
                <nz-select
                  [formControlName]="item.name"
                  [nzShowSearch]="item.params?.showSearch ?? false"
                  [nzShowArrow]="item.params?.showArrow"
                  [nzDisabled]="item.disabled"
                  [nzMode]="item.params?.mode || 'default'"
                  [nzSize]="item.params?.size || 'default'"
                  [nzMaxTagCount]="item.params?.maxTagCount || 3"
                  [nzPlaceHolder]="item.placeholder ?? 'Please Select ' + (item.label?.label || (item.name | label))"
                >
                  @if (item.params?.addOption) {
                    <nz-option
                      [nzLabel]="item.params!.addOption!.text"
                      [nzValue]="null"
                      (click)="item.params!.addOption!.onClick()"
                    >
                      <ng-container *nzOptionTemplate>
                        <div class="custom-option">{{ item.params!.addOption!.text }}</div>
                      </ng-container>
                    </nz-option>
                  }
                  @for (option of item.params?.options || []; track isOptItem(option) ? option.value : option) {
                    <nz-option
                      [nzLabel]="isOptItem(option) ? option.label : option"
                      [nzValue]="isOptItem(option) ? option.value : option"
                    />
                  }
                </nz-select>
              }
            }
          </nz-form-control>
        </nz-form-item>
      }
    }
    <nz-form-item>
      <nz-form-control>
        <button nz-button nzType="primary">Submit</button>
      </nz-form-control>
    </nz-form-item>
  </form>
}
